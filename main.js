!function(){"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}e.p="";var r=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._template=n,this._handleCardClick=r}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".item").cloneNode(!0)}},{key:"_toggleLike",value:function(){this._element.querySelector(".item__like").classList.toggle("item__like_type_liked")}},{key:"_cardClick",value:function(e){var t=e.target;t.classList.contains("item__like")?this._toggleLike():t.classList.contains("item__image")&&this._handleCardClick(this._name,this._link)}},{key:"_setEventListeners",value:function(){var e=this;this._element.addEventListener("click",(function(t){e._cardClick(t)}))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".item__image").setAttribute("src",this._link.replace(/ /g,"")),this._element.querySelector(".item__title").textContent=this._name,this._element}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),o=document.querySelector("#opacity-block"),i=document.querySelector(".gallery"),c=document.querySelector(".image-click");function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=t,this._popupOpen=!1}var t,n;return t=e,(n=[{key:"getTriggerElement",value:function(){return document.querySelector("#".concat(this._popupElement.id,"-trigger"))}},{key:"open",value:function(){var e=this;this._popupElement.classList.add("opacity-style"),this._popupElement.classList.remove("popup_hidden"),o.classList.add("page-opacity"),setTimeout((function(){e._popupOpen=!0}),1)}},{key:"close",value:function(){var e=this;o.classList.remove("page-opacity"),this._popupElement.classList.remove("opacity-style"),setTimeout((function(){e._popupElement.classList.add("popup_hidden")}),500),this._popupOpen=!1}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_clickOutsidePopup",value:function(e){this._popupElement.classList.contains("image-click")?e.target===document.querySelector(".image-click")&&this.close():null===e.target.closest(".form")&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.querySelector('img[alt="Botão de fechar o pop-up"]').addEventListener("click",(function(){e.close()})),document.addEventListener("click",(function(t){!0===e._popupOpen&&e._clickOutsidePopup(t)})),document.addEventListener("keydown",(function(t){e._handleEscClose(t)}))}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===s(o)?o:String(o)),r)}var o}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(o){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e))._popupElement=e,n._callback=t,n}return t=c,(n=[{key:"_getInputValue",value:function(){var e=this._popupElement.querySelectorAll(".form__input");return{firstInput:Array.from(e)[0],secondInput:Array.from(e)[1]}}},{key:"close",value:function(){p(m(c.prototype),"close",this).call(this),this._getInputValue().firstInput.value="",this._getInputValue().secondInput.value=""}},{key:"setEventListeners",value:function(){var e=this;p(m(c.prototype),"setEventListeners",this).call(this),this._popupElement.querySelector(".form__button").addEventListener("click",(function(){var t={firstField:e._getInputValue().firstInput.value,secondField:e._getInputValue().secondInput.value};e._callback(t),e.close()}))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(a);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===b(o)?o:String(o)),r)}var o}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},h.apply(this,arguments)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e))._popupElement=e,t}return t=c,(n=[{key:"open",value:function(e,t){var n=this._popupElement.querySelector(".image-click-open");h(g(c.prototype),"open",this).call(this),this._popupElement.querySelector(".image-click__name").textContent=e,n.setAttribute("src",t)}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(a);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e))._popupElement=e,t}return t=c,(n=[{key:"deleteCard",value:function(e){var t=this;this._popupElement.querySelector(".form__button").addEventListener("click",(function(){e.closest(".item").remove(),t.close()}))}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(a);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===P(o)?o:String(o)),r)}var o}var q=function(){function e(t){var n=t.firstField,r=t.secondField;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n,this._job=r}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:document.querySelector(".profile__name"),job:document.querySelector(".profile__about")}}},{key:"setUserInfo",value:function(){this.getUserInfo().name.textContent=this._name,this.getUserInfo().job.textContent=this._job}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==C(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===C(o)?o:String(o)),r)}var o}var T=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==R(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===R(o)?o:String(o)),r)}var o}var A=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=n,this._input=t.inputSelector,this._button=t.submitButtonSelector,this._inputError=t.inputErrorClass,this._inactiveButton=t.inactiveButtonClass}var t,n;return t=e,(n=[{key:"_checkInputValidity",value:function(e){e.validity.valid?(e.classList.remove(this._inputError),e.nextElementSibling.textContent=""):(e.classList.add(this._inputError),e.nextElementSibling.textContent=e.validationMessage)}},{key:"_hasInvalidInput",value:function(e){return Array.from(e).some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?t.classList.add(this._inactiveButton):t.classList.remove(this._inactiveButton)}},{key:"_insertEventListeners",value:function(e){var t=this,n=Array.from(e.querySelectorAll(this._input)),r=e.querySelector(this._button);this._toggleButtonState(n,r),n.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState(n,r)}))}))}},{key:"enableValidation",value:function(){var e=this;this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._formElement.querySelector(e._button).classList.add(e._inactiveButton)})),this._formElement.querySelectorAll(".form__input-container").forEach((function(t){e._insertEventListeners(t)}))}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),x={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_type_inactive",inputErrorClass:"form__input_type_error"};Array.from(document.forms).forEach((function(e){new A(x,e).enableValidation()}));var V=e.p+"bed8c136e13907f5eefb.svg",z=e.p+"ba43124316072f7a8629.svg",D=e.p+"6c7bf05444b9793fdf6e.svg",F=e.p+"99043841e8bec6b9df21.svg",U=e.p+"ad8a663e5b124b26c411.png",M=e.p+"dbe85ea6278fa2b239bf.svg",N=e.p+"c75819857ff1599f0c50.svg",Y=document.querySelectorAll('img[alt="Botão de fechar o pop-up"]');Array.from(Y).forEach((function(e){e.src=V})),document.querySelector(".default-template").content.querySelector(".item__trash-icon").src=z,document.querySelector(".default-template").content.querySelector(".item__like").src=F,document.querySelector("#line-icon").src=M,document.querySelector("#vector-icon").src=N,document.querySelector(".profile__photo").src=U,document.querySelector(".profile__edit").src=D,document.querySelector(".profile__add").src=V;var G=new S(c);G.setEventListeners();var H=new O(document.querySelector("#form-confirmation"));function J(e,t){G.open(e,t)}function K(e){var t=e.firstField,n=e.secondField,o=new T({items:[{name:t,link:n}],renderer:function(e){var t=new r(e,".default-template",J).generateCard();new S(c,t).setEventListeners(),o.addItem(t);var n=t.querySelector(".item__trash-icon");n.addEventListener("click",(function(){H.open(),H.deleteCard(n)}))}},i);o.renderItems()}H.setEventListeners();var Q=new T({items:[{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/web-code/moved_lago.jpg"},{name:"Parque Nacional da Vanoise ",link:"https://practicum-content.s3.us-west-1.amazonaws.com/web-code/moved_vanoise.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/web-code/moved_latemar.jpg"},{name:"Montanhas Carecas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/web-code/moved_bald-mountains.jpg"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/web-code/moved_lake-louise.jpg"},{name:"Vale de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/web-code/moved_yosemite.jpg"}],renderer:function(e){var t=new r(e,".default-template",J).generateCard();Q.addItem(t)}},i);Q.renderItems(),Array.from(document.querySelectorAll(".form")).forEach((function(e){var t;"form-edit"===e.id&&((t=new v(e,(function(e){new q(e).setUserInfo()}))).setEventListeners(),t.getTriggerElement().addEventListener("click",(function(){t.open()}))),"form-image"===e.id&&((t=new v(e,K)).setEventListeners(),t.getTriggerElement().addEventListener("click",(function(){t.open()}))),"form-confirmation"===e.id&&((t=new O(e)).setEventListeners(),Array.from(document.querySelectorAll(".item__trash-icon")).forEach((function(e){e.addEventListener("click",(function(){H.open(),H.deleteCard(e)}))})))}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aEQsU0FBUzZDLGlCQUFpQixVQUFVNEIsU0FBUSxTQUFDeUQsR0FDdEQsSUFBSTNHLEVBRWEsY0FBYjJHLEVBQU12RyxNQUNSSixFQUFlLElBQUljLEVBQWM2RixHQUFPLFNBQUMvSSxHQUN0QixJQUFJMEUsRUFBUzFFLEdBQ3JCZ0osYUFDWCxLQUNhYixvQkFDYi9GLEVBQWE2RyxvQkFBb0J4SCxpQkFBaUIsU0FBUyxXQUN6RFcsRUFBYWlHLE1BQ2YsS0FHYyxlQUFaVSxFQUFNdkcsTUFDUkosRUFBZSxJQUFJYyxFQUFjNkYsRUFBT1QsSUFDM0JILG9CQUNiL0YsRUFBYTZHLG9CQUFvQnhILGlCQUFpQixTQUFTLFdBQ3pEVyxFQUFhaUcsTUFDZixLQUVjLHNCQUFaVSxFQUFNdkcsTUFDUkosRUFBZSxJQUFJb0MsRUFBc0J1RSxJQUM1Qlosb0JBRU12RSxNQUFNQyxLQUFLaEQsU0FBUzZDLGlCQUFpQixzQkFDN0M0QixTQUFRLFNBQUNxRCxHQUNsQkEsRUFBVWxILGlCQUFpQixTQUFTLFdBQ2xDMkcsRUFBa0JDLE9BQ2xCRCxFQUFrQlEsV0FBV0QsRUFDL0IsR0FDRixJQUVKLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X3B0YnIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfcHRici8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X3B0YnIvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X3B0YnIvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfcHRici8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfcHRici8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X3B0YnIvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X3B0YnIvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfcHRici8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyLy4vc3JjL3NjcmlwdHMvaW1wb3J0cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X3B0YnIvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgdGVtcGxhdGUsIGhhbmRsZUNhcmRDbGljaykge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrXHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUgKCkge1xyXG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZSkuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuaXRlbScpLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHJldHVybiBjYXJkVGVtcGxhdGU7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlTGlrZSgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLml0ZW1fX2xpa2UnKS5jbGFzc0xpc3QudG9nZ2xlKCdpdGVtX19saWtlX3R5cGVfbGlrZWQnKTtcclxuICB9XHJcblxyXG4gIF9jYXJkQ2xpY2soZXZlbnQpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcclxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpdGVtX19saWtlJykpIHtcclxuICAgICAgdGhpcy5fdG9nZ2xlTGlrZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaXRlbV9faW1hZ2UnKSkge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluaylcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5fY2FyZENsaWNrKGV2ZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLml0ZW1fX2ltYWdlJykuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLl9saW5rLnJlcGxhY2UoLyAvZywnJykpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuaXRlbV9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWVcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn0iLCJleHBvcnQgY29uc3Qgb3BhY2l0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvcGFjaXR5LWJsb2NrJyk7XHJcbmV4cG9ydCBjb25zdCBnYWxsZXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnknKTtcclxuZXhwb3J0IGNvbnN0IGltYWdlQmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UtY2xpY2snKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkc0dhbGxlcnkgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3dlYi1jb2RlL21vdmVkX2xhZ28uanBnXCJcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiUGFycXVlIE5hY2lvbmFsIGRhIFZhbm9pc2UgXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvbW92ZWRfdmFub2lzZS5qcGdcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvbW92ZWRfbGF0ZW1hci5qcGdcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJNb250YW5oYXMgQ2FyZWNhc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3dlYi1jb2RlL21vdmVkX2JhbGQtbW91bnRhaW5zLmpwZ1wiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvbW92ZWRfbGFrZS1sb3Vpc2UuanBnXCJcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFsZSBkZSBZb3NlbWl0ZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3dlYi1jb2RlL21vdmVkX3lvc2VtaXRlLmpwZ1wiXHJcbiAgfSxcclxuXTsiLCJpbXBvcnQgeyBvcGFjaXR5IH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJ1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBwb3B1cEVsZW1lbnQ7XHJcbiAgICB0aGlzLl9wb3B1cE9wZW4gPSBmYWxzZVxyXG4gIH1cclxuXHJcbiAgZ2V0VHJpZ2dlckVsZW1lbnQoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7dGhpcy5fcG9wdXBFbGVtZW50LmlkfS10cmlnZ2VyYClcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1zdHlsZScpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX2hpZGRlbicpO1xyXG4gICAgb3BhY2l0eS5jbGFzc0xpc3QuYWRkKCdwYWdlLW9wYWNpdHknKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLl9wb3B1cE9wZW4gPSB0cnVlIH0sIDEpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBvcGFjaXR5LmNsYXNzTGlzdC5yZW1vdmUoJ3BhZ2Utb3BhY2l0eScpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ29wYWNpdHktc3R5bGUnKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG9wdXBfaGlkZGVuJyk7IH0sIDUwMCk7XHJcbiAgICB0aGlzLl9wb3B1cE9wZW4gPSBmYWxzZVxyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfY2xpY2tPdXRzaWRlUG9wdXAgKGV2ZW50KSB7XHJcbiAgICBpZiAodGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnaW1hZ2UtY2xpY2snKSkge1xyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UtY2xpY2snKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbG9zZXN0KCcuZm9ybScpID09PSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2ltZ1thbHQ9XCJCb3TDo28gZGUgZmVjaGFyIG8gcG9wLXVwXCJdJykuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpXHJcbiAgICB9KTtcclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG5cclxuICAgICAgaWYgKHRoaXMuX3BvcHVwT3BlbiA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuX2NsaWNrT3V0c2lkZVBvcHVwKGV2ZW50KTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KVxyXG4gICAgfSk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cEVsZW1lbnQsIGNhbGxiYWNrKSB7XHJcbiAgICBzdXBlcihwb3B1cEVsZW1lbnQpXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBwb3B1cEVsZW1lbnQ7XHJcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWUoKSB7XHJcbiAgICBjb25zdCBmb3JtSW5wdXRzID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19pbnB1dCcpO1xyXG5cclxuICAgIGNvbnN0IGlucHV0c1NlbGVjdG9yID0ge1xyXG4gICAgICBmaXJzdElucHV0OiBBcnJheS5mcm9tKGZvcm1JbnB1dHMpWzBdLFxyXG4gICAgICBzZWNvbmRJbnB1dDogQXJyYXkuZnJvbShmb3JtSW5wdXRzKVsxXVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGlucHV0c1NlbGVjdG9yXHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKClcclxuICAgIHRoaXMuX2dldElucHV0VmFsdWUoKS5maXJzdElucHV0LnZhbHVlID0gJydcclxuICAgIHRoaXMuX2dldElucHV0VmFsdWUoKS5zZWNvbmRJbnB1dC52YWx1ZSA9ICcnXHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2J1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpbnB1dHNWYWx1ZSA9IHtcclxuICAgICAgICBmaXJzdEZpZWxkOiB0aGlzLl9nZXRJbnB1dFZhbHVlKCkuZmlyc3RJbnB1dC52YWx1ZSxcclxuICAgICAgICBzZWNvbmRGaWVsZDogdGhpcy5fZ2V0SW5wdXRWYWx1ZSgpLnNlY29uZElucHV0LnZhbHVlXHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5fY2FsbGJhY2soaW5wdXRzVmFsdWUpXHJcbiAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgfSlcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cC5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwe1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwRWxlbWVudCkge1xyXG4gICAgc3VwZXIocG9wdXBFbGVtZW50KTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IHBvcHVwRWxlbWVudDtcclxuICB9XHJcblxyXG4gIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgY29uc3Qgb3BlbkltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZS1jbGljay1vcGVuJyk7XHJcblxyXG4gICAgc3VwZXIub3BlbigpXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmltYWdlLWNsaWNrX19uYW1lJykudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgb3BlbkltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgbGluayk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwRWxlbWVudCkge1xyXG4gICAgc3VwZXIocG9wdXBFbGVtZW50KVxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gcG9wdXBFbGVtZW50XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKHRyYXNoSWNvbkVsZW1lbnQpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRyYXNoSWNvbkVsZW1lbnQuY2xvc2VzdCgnLml0ZW0nKS5yZW1vdmUoKTtcclxuICAgICAgdGhpcy5jbG9zZSgpXHJcbiAgICB9KVxyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7Zmlyc3RGaWVsZCwgc2Vjb25kRmllbGR9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZmlyc3RGaWVsZDtcclxuICAgIHRoaXMuX2pvYiA9IHNlY29uZEZpZWxkO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCBmaWVsZFNlbGVjdG9ycyA9IHtcclxuICAgICAgbmFtZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKSxcclxuICAgICAgam9iOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWJvdXQnKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZpZWxkU2VsZWN0b3JzXHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbygpIHtcclxuICAgIHRoaXMuZ2V0VXNlckluZm8oKS5uYW1lLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuZ2V0VXNlckluZm8oKS5qb2IudGV4dENvbnRlbnQgPSB0aGlzLl9qb2I7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3Ioe2l0ZW1zLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KVxyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dCA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX2J1dHRvbiA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbnB1dEVycm9yID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbiA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSAoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3IpO1xuICAgICAgaW5wdXRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yKTtcbiAgICAgIGlucHV0RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSAnJ1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQgKGlucHV0TGlzdCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKGlucHV0TGlzdCkuc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbik7XG4gICAgfVxuICB9XG5cbiAgX2luc2VydEV2ZW50TGlzdGVuZXJzKGZpZWxkc2V0KSB7XG4gICAgY29uc3QgZm9ybUlucHV0cyA9IEFycmF5LmZyb20oZmllbGRzZXQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dCkpO1xuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmaWVsZHNldC5xdWVyeVNlbGVjdG9yKHRoaXMuX2J1dHRvbilcblxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGZvcm1JbnB1dHMsIGJ1dHRvbkVsZW1lbnQpO1xuXG4gICAgZm9ybUlucHV0cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGZvcm1JbnB1dHMsIGJ1dHRvbkVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uICgpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fYnV0dG9uKS5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uKVxuICAgIH0pO1xuXG4gICAgY29uc3QgZmllbGRzZXRzID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1fX2lucHV0LWNvbnRhaW5lcicpXG4gICAgZmllbGRzZXRzLmZvckVhY2goKGZpZWxkc2V0KSA9PiB7XG4gICAgICB0aGlzLl9pbnNlcnRFdmVudExpc3RlbmVycyhmaWVsZHNldCk7XG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgZm9ybUNvbmZpZyA9IHtcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbl90eXBlX2luYWN0aXZlXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXG59XG5cbkFycmF5LmZyb20oZG9jdW1lbnQuZm9ybXMpLmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gIG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1Db25maWcsIGZvcm1FbGVtZW50KS5lbmFibGVWYWxpZGF0aW9uKCk7XG59KTsiLCJpbXBvcnQgJy4uL3BhZ2VzL2luZGV4LmNzcydcbmltcG9ydCBleGl0SWNvblNyYyBmcm9tICcuLi9pbWFnZXMvdmVjdG9yX19hZGQuc3ZnJ1xuaW1wb3J0IHRyYXNoSWNvblNyYyBmcm9tICcuLi9pbWFnZXMvdHJhc2gtaWNvbi5zdmcnXG5pbXBvcnQgb3BlbkVkaXRQb3B1cFNyYyBmcm9tICcuLi9pbWFnZXMvdmVjdG9yX19lZGl0LnN2ZydcbmltcG9ydCBvcGVuQWRkUG9wdXBTcmMgZnJvbSAnLi4vaW1hZ2VzL3ZlY3Rvcl9fYWRkLnN2ZydcbmltcG9ydCBsaWtlSWNvblNyYyBmcm9tICcuLi9pbWFnZXMvdmVjdG9yX19saWtlLWJ1dHRvbi5zdmcnXG5pbXBvcnQgcGhvdG9JY29uU3JjIGZyb20gJy4uL2ltYWdlcy9waG90b19pbWFnZS5wbmcnXG5pbXBvcnQgbGluZUljb25TcmMgZnJvbSAnLi4vaW1hZ2VzL2xvZ28vTGluZS5zdmcnXG5pbXBvcnQgdmVjdG9ySWNvblNyYyBmcm9tICcuLi9pbWFnZXMvbG9nby9WZWN0b3Iuc3ZnJ1xuXG5jb25zdCBleGl0SWNvbkltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZ1thbHQ9XCJCb3TDo28gZGUgZmVjaGFyIG8gcG9wLXVwXCJdJylcblxuQXJyYXkuZnJvbShleGl0SWNvbkltYWdlcykuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICBpdGVtLnNyYyA9IGV4aXRJY29uU3JjXG59KVxuXG5jb25zdCB0cmFzaEljb25JbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGVmYXVsdC10ZW1wbGF0ZScpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLml0ZW1fX3RyYXNoLWljb24nKVxudHJhc2hJY29uSW1hZ2VzLnNyYyA9IHRyYXNoSWNvblNyYztcblxuY29uc3QgbGlrZUljb25JbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZWZhdWx0LXRlbXBsYXRlJykuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuaXRlbV9fbGlrZScpXG5saWtlSWNvbkltYWdlLnNyYyA9IGxpa2VJY29uU3JjO1xuXG5jb25zdCBsaW5lSWNvbkltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpbmUtaWNvbicpXG5saW5lSWNvbkltYWdlLnNyYyA9IGxpbmVJY29uU3JjO1xuXG5jb25zdCB2ZWN0b3JJY29uSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdmVjdG9yLWljb24nKVxudmVjdG9ySWNvbkltYWdlLnNyYyA9IHZlY3Rvckljb25TcmM7XG5cbmNvbnN0IHBob3RvSWNvbkltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3Bob3RvJylcbnBob3RvSWNvbkltYWdlLnNyYyA9IHBob3RvSWNvblNyYztcblxuY29uc3Qgb3BlbkVkaXRQb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQnKVxub3BlbkVkaXRQb3B1cEltYWdlLnNyYyA9IG9wZW5FZGl0UG9wdXBTcmM7XG5cbmNvbnN0IG9wZW5BZGRQb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZCcpXG5vcGVuQWRkUG9wdXBJbWFnZS5zcmMgPSBvcGVuQWRkUG9wdXBTcmM7IiwiaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IHsgZ2FsbGVyeSwgaW1hZ2VCbG9jaywgY2FyZHNHYWxsZXJ5IH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJ1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzJztcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnXHJcbmltcG9ydCB7fSBmcm9tICcuLi9zY3JpcHRzL2ltcG9ydHMuanMnXHJcblxyXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKGltYWdlQmxvY2spXHJcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHBvcHVwQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybS1jb25maXJtYXRpb24nKSk7XHJcbnBvcHVwQ29uZmlybWF0aW9uLnNldEV2ZW50TGlzdGVuZXJzKClcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhuYW1lLCBsaW5rKSB7XHJcbiAgcG9wdXBJbWFnZS5vcGVuKG5hbWUsIGxpbmspXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZE5ld0NhcmQoe2ZpcnN0RmllbGQsIHNlY29uZEZpZWxkfSkge1xyXG4gIGNvbnN0IGNhcmREYXRhID0gW3tcclxuICAgIG5hbWU6IGZpcnN0RmllbGQsXHJcbiAgICBsaW5rOiBzZWNvbmRGaWVsZCxcclxuICB9XTtcclxuXHJcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBTZWN0aW9uKHtcclxuICAgIGl0ZW1zOiBjYXJkRGF0YSxcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgXCIuZGVmYXVsdC10ZW1wbGF0ZVwiLCBoYW5kbGVDYXJkQ2xpY2spO1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICAgIGNvbnN0IG5ld0ltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKGltYWdlQmxvY2ssIGNhcmRFbGVtZW50KVxyXG4gICAgICBuZXdJbWFnZS5zZXRFdmVudExpc3RlbmVycygpXHJcbiAgICAgIG5ld0NhcmQuYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcblxyXG4gICAgICBjb25zdCB0cmFzaEljb24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuaXRlbV9fdHJhc2gtaWNvbicpXHJcbiAgICAgIHRyYXNoSWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBwb3B1cENvbmZpcm1hdGlvbi5vcGVuKClcclxuICAgICAgICBwb3B1cENvbmZpcm1hdGlvbi5kZWxldGVDYXJkKHRyYXNoSWNvbilcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9LCBnYWxsZXJ5KTtcclxuXHJcbiAgbmV3Q2FyZC5yZW5kZXJJdGVtcygpXHJcbn1cclxuXHJcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xyXG4gIGl0ZW1zOiBjYXJkc0dhbGxlcnksXHJcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgXCIuZGVmYXVsdC10ZW1wbGF0ZVwiLCBoYW5kbGVDYXJkQ2xpY2spO1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gICAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgfVxyXG59LCBnYWxsZXJ5KTtcclxuXHJcbmNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XHJcblxyXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtJykpLmZvckVhY2goKHBvcHVwKSA9PiB7XHJcbiAgbGV0IHBvcHVwRWxlbWVudDtcclxuXHJcbiAgaWYgKHBvcHVwLmlkID09PSAnZm9ybS1lZGl0Jykge1xyXG4gICAgcG9wdXBFbGVtZW50ID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXAsIChkYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKGRhdGEpXHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKClcclxuICAgIH0pXHJcbiAgICBwb3B1cEVsZW1lbnQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHBvcHVwRWxlbWVudC5nZXRUcmlnZ2VyRWxlbWVudCgpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICBwb3B1cEVsZW1lbnQub3BlbigpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgaWYgKHBvcHVwLmlkID09PSdmb3JtLWltYWdlJykge1xyXG4gICAgcG9wdXBFbGVtZW50ID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXAsIGFkZE5ld0NhcmQpXHJcbiAgICBwb3B1cEVsZW1lbnQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHBvcHVwRWxlbWVudC5nZXRUcmlnZ2VyRWxlbWVudCgpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICBwb3B1cEVsZW1lbnQub3BlbigpXHJcbiAgICB9KVxyXG4gIH1cclxuICBpZiAocG9wdXAuaWQgPT09J2Zvcm0tY29uZmlybWF0aW9uJykge1xyXG4gICAgcG9wdXBFbGVtZW50ID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihwb3B1cCk7XHJcbiAgICBwb3B1cEVsZW1lbnQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICBjb25zdCB0cmFzaEljb25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXRlbV9fdHJhc2gtaWNvbicpKVxyXG4gICAgdHJhc2hJY29ucy5mb3JFYWNoKCh0cmFzaEljb24pID0+IHtcclxuICAgICAgdHJhc2hJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIHBvcHVwQ29uZmlybWF0aW9uLm9wZW4oKVxyXG4gICAgICAgIHBvcHVwQ29uZmlybWF0aW9uLmRlbGV0ZUNhcmQodHJhc2hJY29uKVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9XHJcbn0pIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJwIiwiQ2FyZCIsImRhdGEiLCJ0ZW1wbGF0ZSIsImhhbmRsZUNhcmRDbGljayIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfdGVtcGxhdGUiLCJfaGFuZGxlQ2FyZENsaWNrIiwia2V5IiwidmFsdWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJldmVudCIsInRhcmdldCIsImNvbnRhaW5zIiwiX3RvZ2dsZUxpa2UiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2FyZENsaWNrIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwic2V0QXR0cmlidXRlIiwicmVwbGFjZSIsInRleHRDb250ZW50Iiwib3BhY2l0eSIsImdhbGxlcnkiLCJpbWFnZUJsb2NrIiwiUG9wdXAiLCJwb3B1cEVsZW1lbnQiLCJfcG9wdXBFbGVtZW50IiwiX3BvcHVwT3BlbiIsImNvbmNhdCIsImlkIiwiYWRkIiwicmVtb3ZlIiwic2V0VGltZW91dCIsIl90aGlzMiIsImNsb3NlIiwiY2xvc2VzdCIsIl90aGlzMyIsIl9jbGlja091dHNpZGVQb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsIlBvcHVwV2l0aEZvcm0iLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJjYWxsYmFjayIsImNhbGwiLCJfY2FsbGJhY2siLCJmb3JtSW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImZpcnN0SW5wdXQiLCJBcnJheSIsImZyb20iLCJzZWNvbmRJbnB1dCIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJfZ2V0SW5wdXRWYWx1ZSIsImlucHV0c1ZhbHVlIiwiZmlyc3RGaWVsZCIsInNlY29uZEZpZWxkIiwiUG9wdXBXaXRoSW1hZ2UiLCJvcGVuSW1hZ2UiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJ0cmFzaEljb25FbGVtZW50IiwiVXNlckluZm8iLCJfcmVmIiwiX2pvYiIsImpvYiIsImdldFVzZXJJbmZvIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImZvckVhY2giLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXQiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbiIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2lucHV0RXJyb3IiLCJpbnB1dEVycm9yQ2xhc3MiLCJfaW5hY3RpdmVCdXR0b24iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIm5leHRFbGVtZW50U2libGluZyIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0Iiwic29tZSIsImJ1dHRvbkVsZW1lbnQiLCJfaGFzSW52YWxpZElucHV0IiwiZmllbGRzZXQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfaW5zZXJ0RXZlbnRMaXN0ZW5lcnMiLCJmb3JtQ29uZmlnIiwiZm9ybXMiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXhpdEljb25JbWFnZXMiLCJzcmMiLCJleGl0SWNvblNyYyIsInRyYXNoSWNvblNyYyIsImxpa2VJY29uU3JjIiwibGluZUljb25TcmMiLCJ2ZWN0b3JJY29uU3JjIiwicGhvdG9JY29uU3JjIiwib3BlbkVkaXRQb3B1cFNyYyIsIm9wZW5BZGRQb3B1cFNyYyIsInBvcHVwSW1hZ2UiLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwQ29uZmlybWF0aW9uIiwib3BlbiIsImFkZE5ld0NhcmQiLCJuZXdDYXJkIiwiY2FyZEVsZW1lbnQiLCJnZW5lcmF0ZUNhcmQiLCJhZGRJdGVtIiwidHJhc2hJY29uIiwiZGVsZXRlQ2FyZCIsInJlbmRlckl0ZW1zIiwiY2FyZExpc3QiLCJwb3B1cCIsInNldFVzZXJJbmZvIiwiZ2V0VHJpZ2dlckVsZW1lbnQiXSwic291cmNlUm9vdCI6IiJ9